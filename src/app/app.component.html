<h1>AMP KiwiSaver helper</h1>

<p>This tool calculates how much you will need to add to your KiwiSaver to make the most of the government
  contribution based on a report generated by AMP's website. </p>

<h2 *ngIf="records">{{currentYear}}</h2>

<div class="button-bar">
  <input #csvInput hidden type="file" onclick="this.value=null" (change)="uploadCsv($event)"
         accept=".csv"/>
  <button mat-raised-button color="primary" (click)="csvInput.click()">
    <mat-icon aria-hidden="true">file_upload</mat-icon>
    Upload CSV file
  </button>

  <button mat-raised-button color="primary" (click)="downloadCsv()" [disabled]="records == null">
    <mat-icon aria-hidden="true">file_download</mat-icon>
    Download CSV file
  </button>

  <mat-chip-list *ngIf="records != null">
    <mat-chip>Direct debits: ${{directDebitTotal | number : '1.2-2'}}</mat-chip>
    <mat-chip>Member contributions: ${{memberContributionsTotal | number : '1.2-2'}}</mat-chip>
    <mat-chip>Total: ${{total | number : '1.2-2'}}</mat-chip>
    <mat-chip *ngIf="!totalIsEnough">⚠️ Left to get: ${{leftToGet | number : '1.2-2'}}</mat-chip>
    <mat-chip *ngIf="totalIsEnough">✅ You've contributed enough!</mat-chip>
  </mat-chip-list>

  <button mat-icon-button color="accent" aria-label="Help" (click)="openHelp()">
    <mat-icon>help</mat-icon>
  </button>
</div>

<mat-spinner *ngIf="loadingDataFromCsv"></mat-spinner>

<table mat-table [dataSource]="records" class="mat-elevation-z8" *ngIf="records != null">
  <mat-text-column name="EffectiveDate"></mat-text-column>
  <mat-text-column name="Description"></mat-text-column>
  <mat-text-column name="Option"></mat-text-column>
  <mat-text-column name="Account"></mat-text-column>
  <mat-text-column name="Units"></mat-text-column>
  <mat-text-column name="UnitPrice"></mat-text-column>
  <mat-text-column name="Amount"></mat-text-column>

  <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
  <tr mat-row *matRowDef="let row; columns:columnsToDisplay;"></tr>
</table>
